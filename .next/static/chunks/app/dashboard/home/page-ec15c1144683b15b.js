(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{4958:function(e,s,a){Promise.resolve().then(a.bind(a,5883))},2424:function(e,s,a){"use strict";var t=a(7437),r=a(5425),l=a(2828);s.Z=e=>{let{children:s}=e;return(0,t.jsxs)("div",{className:"flex h-screen",children:[(0,t.jsx)("div",{className:"w-64",children:(0,t.jsx)(r.default,{})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,t.jsx)("main",{children:s})}),(0,t.jsx)(l.Toaster,{})]})}},5883:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return j}});var t=a(7437),r=a(2424),l=a(2265),n=a(2173),c=a(4011),o=a(2601),i=()=>{let[e,s]=(0,l.useState)([]),[a,r]=(0,l.useState)(null),i=o.env.BACKEND_URL,d=async()=>{try{let e=await n.Z.get("".concat(i,"/workspace-tabs"));s(e.data.map(e=>({...e,tabs:e.tabs||[]})))}catch(e){console.error("Error fetching workspaces:",e)}};(0,l.useEffect)(()=>{d()},[]);let u=async(e,s)=>{s.stopPropagation();try{await n.Z.delete("".concat(i,"/workspaces/").concat(e)),d()}catch(e){console.error("Error deleting workspace:",e)}},m=e=>e.length>30?e.substring(0,30)+"...":e,p=e=>{chrome.runtime.sendMessage("lgcppbhmkjaanapiifdjaindpcllghmf",{action:"openWorkspace",data:e})};return(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h2",{children:"Workspace Tabs"}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-4",children:e.map(e=>(0,t.jsx)("div",{className:"workspace overflow-hidden",onMouseEnter:()=>r(e.id),onMouseLeave:()=>r(null),onClick:()=>p(e.tabs.map(e=>e.url)),children:(0,t.jsxs)(c.E.div,{whileTap:{scale:.8},whileHover:{transition:{duration:1}},className:"border rounded-xl p-2 flex flex-col h-52",children:[(0,t.jsxs)("div",{className:"text-heading pb-2",children:["Workspace Name:"," ",(0,t.jsx)("span",{className:"text-green-500",children:e.name})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 overflow-y-auto",children:[e.tabs&&e.tabs.slice(0,3).map((e,s)=>(0,t.jsx)("div",{className:"flex items-center justify-between overflow-hidden",children:(0,t.jsxs)("div",{className:"flex gap-2 pb-2",children:[(0,t.jsx)("img",{src:e.image||"/chrome.svg",alt:"Tab Image",height:25,width:30}),m(e.title)]})},s)),e.tabs&&e.tabs.length>3&&(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.tabs.length-3," more tab(s) hidden"]})]}),(0,t.jsxs)("div",{className:"mt-auto",children:[(0,t.jsx)("button",{onClick:s=>{u(e.id,s),window.location.reload()},className:"text-red-500 hover:text-red-700 mr-2 ",children:"Delete Workspace"}),(0,t.jsx)("button",{onClick:()=>{p(e.tabs.map(e=>e.url)),window.location.reload()},className:"pl-12 text-white ".concat(a===e.id?"text-gray-400":"hover:text-green-500"),children:"Open workspace"})]})]})},e.id))})]})},d=a(1865),u=a(7788),m=a(4578),p=e=>{let{data:s,userId:a}=e,t=(0,l.useRef)(!0);(0,l.useEffect)(()=>(s&&!t.current&&r(),()=>{t.current=!1}),[s]);let r=async()=>{console.log("Saving workspace...");try{if(!s||!s.selectedTabs){console.log("Data or selectedTabs is undefined");return}let e=await n.Z.post("http://localhost:8080/workspace-data",{Wname:s.Wname,selectedTabs:s.selectedTabs,userId:a});console.log("Saved workspace:",e.data)}catch(e){console.error("Error saving workspace to database:",e)}};return null},h=a(8110),x=a(2749),g=e=>{let[s,a]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let s=new WebSocket(e);return s.onmessage=e=>{a(JSON.parse(e.data))},s.onclose=()=>{console.log("WebSocket connection closed")},()=>{s.close()}},[e]),s},b=a(2601);let v=m.z.object({Wname:m.z.string().min(1,{message:"Name of workspace must be at least 1 character"}),selectedTabs:m.z.array(m.z.string())});var f=()=>{var e;let{data:s,status:a}=(0,x.useSession)(),{toast:r}=(0,u.pm)(),[n,c]=(0,l.useState)(!1),[o,i]=(0,l.useState)(null),m=g("ws://localhost:8080"),[f,j]=(0,l.useState)(null),w=b.env.BACKEND_URL,{register:N,handleSubmit:k,formState:{errors:W},setValue:S,watch:y}=(0,d.cI)({resolver:(0,h.F)(v),defaultValues:{Wname:"",selectedTabs:[]}}),E=y("selectedTabs");(0,l.useEffect)(()=>{if(m&&w){let e=new WebSocket(w.replace(/^http/,"ws"));return i(e),e.addEventListener("open",()=>{console.log("WebSocket connection opened")}),e.addEventListener("message",e=>{console.log("Received data:",JSON.parse(e.data))}),e.addEventListener("close",()=>{console.log("WebSocket connection closed")}),e.addEventListener("error",e=>{console.error("WebSocket error:",e)}),()=>{e.close()}}},[m,w]);let T=async e=>{let s={Wname:e.Wname,selectedTabs:e.selectedTabs.map(e=>({title:m[e].title||"",url:m[e].url||"",image:m[e].image||""}))};r({variant:"default",title:"New workspace created:",description:"".concat(e.Wname," is added to the workspace section")}),o&&(console.log("Sending workspaceData via WebSocket:",s),o.send(JSON.stringify(s))),j(s),window.location.reload()};return(0,t.jsxs)("div",{className:"flex flex-col gap-2 p-4",children:[(0,t.jsxs)("form",{onSubmit:k(T),children:[(0,t.jsxs)("div",{className:"flex gap-4 pt-4 items-center",children:[(0,t.jsx)("div",{className:"text-heading",children:"Enter Workspace Name:"}),(0,t.jsx)("input",{className:"w-80 rounded-lg h-10 bg-black p-2 text-base border-2 border-green-600 focus:border-purple-500",placeholder:"Workspace name",...N("Wname",{required:!0})}),W.Wname&&(0,t.jsx)("span",{className:"error-message",children:"Workspace name is required"})]}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{className:"text-heading",children:"Open the Tabs you want to add to the Workspace:"}),(0,t.jsx)("div",{className:"pt-2 gap-3",children:m&&Object.keys(m).map(e=>{let s=m[e];return s?(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsx)("input",{type:"checkbox",id:e,onChange:s=>{s.target.checked?S("selectedTabs",[...E,e]):S("selectedTabs",E.filter(s=>s!==e))},className:"accent-green p-3 border rounded size-6"}),(0,t.jsx)("div",{children:(0,t.jsx)("img",{src:s.image||"/chrome.svg",width:24,height:24,alt:"tab-image"})}),(0,t.jsx)("label",{htmlFor:e,children:s.title})]},e):null})}),W.selectedTabs&&(0,t.jsx)("span",{className:"error-message",children:"At least one tab is required"}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsxs)("button",{className:"p-[3px] relative",type:"submit",disabled:n,children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-green-500 rounded-lg"}),(0,t.jsx)("div",{className:"px-8 py-2 bg-black rounded-[6px] relative group transition duration-200 text-white text-heading hover:bg-transparent",children:"Create"})]})})]}),f&&(null==s?void 0:s.user)&&m&&(0,t.jsx)(p,{data:{...f,selectedTabs:E.map(e=>m[e])},userId:(null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.email)||""})]})};function j(){return(0,t.jsxs)(r.Z,{children:[(0,t.jsx)(i,{}),(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)(f,{})})]})}}},function(e){e.O(0,[749,985,758,920,8,329,11,173,926,971,938,744],function(){return e(e.s=4958)}),_N_E=e.O()}]);