(()=>{var e={};e.id=883,e.ids=[883],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},60030:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=t(50482),a=t(69108),o=t(62563),n=t.n(o),i=t(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(s,l);let c=["",{children:["dashboard",{children:["home",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,34580)),"C:\\Users\\yeshb\\OneDrive\\Desktop\\js-basics\\projects\\next-chrome-extension\\app\\dashboard\\home\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,82628)),"C:\\Users\\yeshb\\OneDrive\\Desktop\\js-basics\\projects\\next-chrome-extension\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\yeshb\\OneDrive\\Desktop\\js-basics\\projects\\next-chrome-extension\\app\\dashboard\\home\\page.tsx"],p="/dashboard/home/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/home/page",pathname:"/dashboard/home",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},91846:(e,s,t)=>{Promise.resolve().then(t.bind(t,11694))},1365:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var r=t(95344),a=t(60418),o=t(83263);let n=({children:e})=>(0,r.jsxs)("div",{className:"flex h-screen",children:[r.jsx("div",{className:"w-64",children:r.jsx(a.default,{})}),r.jsx("div",{className:"flex-1 overflow-y-auto",children:r.jsx("main",{children:e})}),r.jsx(o.Toaster,{})]})},11694:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var r=t(95344),a=t(1365),o=t(3729),n=t(53608),i=t(56892);let l=()=>{let[e,s]=(0,o.useState)([]),[t,a]=(0,o.useState)(null),l=process.env.BACKEND_URL,c=async()=>{try{let e=await n.Z.get(`${l}/workspace-tabs`);s(e.data.map(e=>({...e,tabs:e.tabs||[]})))}catch(e){console.error("Error fetching workspaces:",e)}};(0,o.useEffect)(()=>{c()},[]);let d=async(e,s)=>{s.stopPropagation();try{await n.Z.delete(`${l}/workspaces/${e}`),c()}catch(e){console.error("Error deleting workspace:",e)}},p=e=>e.length>30?e.substring(0,30)+"...":e,u=e=>{chrome.runtime.sendMessage("lgcppbhmkjaanapiifdjaindpcllghmf",{action:"openWorkspace",data:e})};return(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("h2",{children:"Workspace Tabs"}),r.jsx("div",{className:"grid grid-cols-4 gap-4",children:e.map(e=>r.jsx("div",{className:"workspace overflow-hidden",onMouseEnter:()=>a(e.id),onMouseLeave:()=>a(null),onClick:()=>u(e.tabs.map(e=>e.url)),children:(0,r.jsxs)(i.E.div,{whileTap:{scale:.8},whileHover:{transition:{duration:1}},className:"border rounded-xl p-2 flex flex-col h-52",children:[(0,r.jsxs)("div",{className:"text-heading pb-2",children:["Workspace Name:"," ",r.jsx("span",{className:"text-green-500",children:e.name})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 overflow-y-auto",children:[e.tabs&&e.tabs.slice(0,3).map((e,s)=>r.jsx("div",{className:"flex items-center justify-between overflow-hidden",children:(0,r.jsxs)("div",{className:"flex gap-2 pb-2",children:[r.jsx("img",{src:e.image||"/chrome.svg",alt:"Tab Image",height:25,width:30}),p(e.title)]})},s)),e.tabs&&e.tabs.length>3&&(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[e.tabs.length-3," more tab(s) hidden"]})]}),(0,r.jsxs)("div",{className:"mt-auto",children:[r.jsx("button",{onClick:s=>{d(e.id,s),window.location.reload()},className:"text-red-500 hover:text-red-700 mr-2 ",children:"Delete Workspace"}),r.jsx("button",{onClick:()=>{u(e.tabs.map(e=>e.url)),window.location.reload()},className:`pl-12 text-white ${t===e.id?"text-gray-400":"hover:text-green-500"}`,children:"Open workspace"})]})]})},e.id))})]})};var c=t(60708),d=t(25092),p=t(29709);let u=({data:e,userId:s})=>{let t=(0,o.useRef)(!0);(0,o.useEffect)(()=>(e&&!t.current&&r(),()=>{t.current=!1}),[e]);let r=async()=>{console.log("Saving workspace...");try{if(!e||!e.selectedTabs){console.log("Data or selectedTabs is undefined");return}let t=await n.Z.post("http://localhost:8080/workspace-data",{Wname:e.Wname,selectedTabs:e.selectedTabs,userId:s});console.log("Saved workspace:",t.data)}catch(e){console.error("Error saving workspace to database:",e)}};return null};var x=t(85453),m=t(47674);let h=e=>{let[s,t]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let s=new WebSocket(e);return s.onmessage=e=>{t(JSON.parse(e.data))},s.onclose=()=>{console.log("WebSocket connection closed")},()=>{s.close()}},[e]),s},g=p.z.object({Wname:p.z.string().min(1,{message:"Name of workspace must be at least 1 character"}),selectedTabs:p.z.array(p.z.string())}),b=()=>{let{data:e,status:s}=(0,m.useSession)(),{toast:t}=(0,d.pm)(),[a,n]=(0,o.useState)(!1),[i,l]=(0,o.useState)(null),p=h("ws://localhost:8080"),[b,v]=(0,o.useState)(null),j=process.env.BACKEND_URL,{register:f,handleSubmit:w,formState:{errors:k},setValue:N,watch:y}=(0,c.cI)({resolver:(0,x.F)(g),defaultValues:{Wname:"",selectedTabs:[]}}),q=y("selectedTabs");(0,o.useEffect)(()=>{if(p&&j){let e=new WebSocket(j.replace(/^http/,"ws"));return l(e),e.addEventListener("open",()=>{console.log("WebSocket connection opened")}),e.addEventListener("message",e=>{console.log("Received data:",JSON.parse(e.data))}),e.addEventListener("close",()=>{console.log("WebSocket connection closed")}),e.addEventListener("error",e=>{console.error("WebSocket error:",e)}),()=>{e.close()}}},[p,j]);let W=async e=>{let s={Wname:e.Wname,selectedTabs:e.selectedTabs.map(e=>({title:p[e].title||"",url:p[e].url||"",image:p[e].image||""}))};t({variant:"default",title:"New workspace created:",description:`${e.Wname} is added to the workspace section`}),i&&(console.log("Sending workspaceData via WebSocket:",s),i.send(JSON.stringify(s))),v(s),window.location.reload()};return(0,r.jsxs)("div",{className:"flex flex-col gap-2 p-4",children:[(0,r.jsxs)("form",{onSubmit:w(W),children:[(0,r.jsxs)("div",{className:"flex gap-4 pt-4 items-center",children:[r.jsx("div",{className:"text-heading",children:"Enter Workspace Name:"}),r.jsx("input",{className:"w-80 rounded-lg h-10 bg-black p-2 text-base border-2 border-green-600 focus:border-purple-500",placeholder:"Workspace name",...f("Wname",{required:!0})}),k.Wname&&r.jsx("span",{className:"error-message",children:"Workspace name is required"})]}),r.jsx("br",{}),r.jsx("div",{className:"text-heading",children:"Open the Tabs you want to add to the Workspace:"}),r.jsx("div",{className:"pt-2 gap-3",children:p&&Object.keys(p).map(e=>{let s=p[e];return s?(0,r.jsxs)("div",{className:"flex gap-2 pt-2",children:[r.jsx("input",{type:"checkbox",id:e,onChange:s=>{s.target.checked?N("selectedTabs",[...q,e]):N("selectedTabs",q.filter(s=>s!==e))},className:"accent-green p-3 border rounded size-6"}),r.jsx("div",{children:r.jsx("img",{src:s.image||"/chrome.svg",width:24,height:24,alt:"tab-image"})}),r.jsx("label",{htmlFor:e,children:s.title})]},e):null})}),k.selectedTabs&&r.jsx("span",{className:"error-message",children:"At least one tab is required"}),r.jsx("div",{className:"pt-4",children:(0,r.jsxs)("button",{className:"p-[3px] relative",type:"submit",disabled:a,children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500 to-green-500 rounded-lg"}),r.jsx("div",{className:"px-8 py-2 bg-black rounded-[6px] relative group transition duration-200 text-white text-heading hover:bg-transparent",children:"Create"})]})})]}),b&&e?.user&&p&&r.jsx(u,{data:{...b,selectedTabs:q.map(e=>p[e])},userId:e?.user?.email||""})]})};function v(){return(0,r.jsxs)(a.Z,{children:[r.jsx(l,{}),r.jsx("div",{className:"flex flex-col",children:r.jsx(b,{})})]})}},34580:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>o,__esModule:()=>a,default:()=>n});let r=(0,t(86843).createProxy)(String.raw`C:\Users\yeshb\OneDrive\Desktop\js-basics\projects\next-chrome-extension\app\dashboard\home\page.tsx`),{__esModule:a,$$typeof:o}=r,n=r.default}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,237,697,337,604,149,636,967,608,892,228],()=>t(60030));module.exports=r})();